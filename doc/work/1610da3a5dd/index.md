## 学会使用字典
字典使用很常见，尤其是一些入参和逻辑，经常有传入数字的操作，比如用户选择电子发票，需要给入参传入1，如果使用增值税发票需要入参传入2。如果在逻辑和入参中使用大量数字来进行操作非常容易混淆，并且，非常不利于代码的维护和可读性。更甚至说：前端需要处理不同API提供的数据，A组的电子发票定义为1，B组定义为5。 

所以，我们可以使用字典进行如下定义：
```javascript
var enum_invoice = {
  electronic: 0, // 电子发票
  value_added_tax: 1 // 增值税发票
  // ... other type of invoice
}
```
这样在代码中就可以使用enum_invoice.electronic来表示电子发票，这样有如下好处：
1. 代码的可读性明显提高，维护起来会更轻松，返回的统一为int型的数字，不会有时候string，或者其他类型，非常容易统一；
2. 如果有一天你的电子发票要求变成2，那么你只需要修改字典就行了；

我们还可以使用字典记录cookie的key值，因为你并不知道谁在何时何地在浏览器种下了一个什么名字的cookie。对于一个需要在客户端记录很多东西的网站，很有可能你的cookie name会重复，或者取得名字近似，但是value值是一样的，而且时间长了自己定义的cookie是什么含义也搞不清楚了。给之后的维护带来非常多的麻烦。所以使用这种方法进行处理，可以改善这个问题：
```javascript
var enum_cookie = {
  user_id: '', // 用户id
  area_name: '', // 当前省市区
  area_code: '', // 当前省市区对应的编号
  // ...
}
```
我们在定义cookie的话会统一在enum_cookie中进行定义，这样如果之前有重复的cookie我们就可以判断是否可以复用，不会再加入相似的cookie，而且每个cookie name 都在一个统一的地方添加注释，方便日后维护。

## 为Object添加属性
对于一个项目，给Object对象添加属性是非常常见的。问题是如何维护这个object对象。

举个例子：我在项目开头定义一个object对象，用来表示整个结算页面需要展示的内容，内容非常复杂：
```javascript
var order = {
  coupon: { // 优惠券
    code: '',
    name: ''
    // ...
  },
  payment: { // 支付方式
    code: '',
    name: '',
    // ...
  },
  invoice: { // 发票
    name: '',
    title: ''
    // ...
  }
  // ...
}
```
这只是简单列举了几项，如果我们刚开始定义了一个order对象，在之后的编码工作中，突然发现自己需要在结算页中加入一个是否显示订单价格的字段，我们直接在order.can_show_price中对属性值进行定义，这会带来一个问题，那就是 **我可以随意在对象中添加属性，最后添加到我自己也不知道这个对象包含多少属性，他们有可能是重复的，近似的key值但是定义相同的，中间变量用完可以销毁的。** 我们需要去查找业务逻辑来判断这个变量是否有意义，而且还不能保证自己的判断完全正确（一般情况下，我是不敢随便处理这种危险的变量），无疑再次提高的维护的难度。

所以如何解决这个问题，非常重要，我们需要去定义这个对象是否可以进行配置和拓展，如何配置 [传送门](https://segmentfault.com/a/1190000003894119)。
当然我们也可以使用Typescript或者flow进行强类型定义，提高代码健壮性，在编写时就杜绝此类事件发生。

## 项目跳转，导航
在项目开发与接新需求是一定要规划好项目的导航，防止进入死循环。
有些浏览器会有返回无法刷新（无法重新执行脚本，使用的缓存）的问题，可以尝试使用pageshow,pagehide进行处理。

## 小程序（WEPY框架）列表BUG处理，以后依次进行测试，减少BUG数量
1. 点击区域热区问题太小，用户体验差；
2. 单行文字过多省略，行高太小导致显示了第二行文字的顶部，尤其是 iphone；
3. 在 onUnload 时候页面状态没有还原，导致第二次进入页面部分状态的异常；
4. 有些元素需要动态控制显示还是隐藏的，默认统一为隐藏，否则用户进入页面会先看到元素，然后消失，体验极差；弹窗需要动画弹出的，初始状态也需要隐藏或者在屏幕外面；
5. 弹层弹出时底部列表不能滚动；
6. 样式方面，虽然高度计算是用 px 作为单位，但是，不影响高度的还是要用rpx来兼容不同型号的手机，因为他们的屏幕分辨率不同；
7. 模板中的条件判断如果过多（很多 && 或者 ||）要使用 compute 来进行统一处理，否则会有渲染问题；
8. 对于fixed定位的元素要设置 background-color，因为部分手机这个元素的默认背景是透明的；
9. 在WEPY框架中尽量少使用 *prop.sync* 因为有时会失效，$invoke 比较稳；
10. 在WEPY框架中尽量不要调用事件加参数，因为传到 Method 中的方法的参数会统一变为 event，请使用官方的dataset解决此问题；
11. srcoll-view的滚动到顶部功能，在设置 srcollTop 的时候请注意，不能和初始设定的值一样，所以，this.scrollTop ? this.scrollTop = 0 : this.scrollTop = 1;在0和1直接切换即可；
12. 关于搜索框 onfouce 时显示清空按钮，或者旁边出现搜索按钮，总之改变搜索框宽度的时，会有一系列的问题，比如：总是点不到清空按钮，点击清空按钮文本框会聚焦。这个问题iphone和androic会有不同的兼容性问题，最后我的解决方案是，判断系统类型，做了两套UI，damn！
13. 关于列表滚动页面元素进行显示隐藏的需求，一定要避免动态操作scroll-view的高度，因为小程序的性能堪忧，页面卡顿不说，在iphone中scroll-view是有弹性的，他会影响你判断列表的滚动方向，出现一系列的bug，所以请进行简化页面。PS：即使做了一系列优化，真的很卡；
14. 历史经验告诉我们，不熟悉的，更新频率慢的，star数量少的，非主流框架，尽量不要在项目中使用！哪怕是VUE这么流行的框架，如果时间很紧请放弃他，请用你最熟悉的 jquery，因为我根本没时间告诉你组件怎么调用！
